(function Q(B,n){if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define("grapha",[],n);else if(typeof exports==="object")exports["grapha"]=n();else B["grapha"]=n()})(this,function(){return function(Q){var B={};function n(e){if(B[e]){return B[e].exports}var F=B[e]={i:e,l:false,exports:{}};Q[e].call(F.exports,F,F.exports,n);F.l=true;return F.exports}n.m=Q;n.c=B;n.d=function(Q,B,e){if(!n.o(Q,B)){Object.defineProperty(Q,B,{configurable:false,enumerable:true,get:e})}};n.n=function(Q){var B=Q&&Q.__esModule?function B(){return Q["default"]}:function B(){return Q};n.d(B,"a",B);return B};n.o=function(Q,B){return Object.prototype.hasOwnProperty.call(Q,B)};n.p="";return n(n.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.Graph = undefined;\n\nvar _grapha = __webpack_require__(1);\n\nvar _grapha2 = _interopRequireDefault(_grapha);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Graph = _grapha2.default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/OTU1MiJdLCJuYW1lcyI6WyJHcmFwaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7UUFDU0EsSyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdyYXBoIGZyb20gJy4vZ3JhcGhhLmpzJztcbmV4cG9ydCB7IEdyYXBoIH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Graph = function () {\n  function Graph(config) {\n    var _this = this;\n\n    _classCallCheck(this, Graph);\n\n    this._config = config || {};\n    var defaultConf = {\n      isWeighted: false,\n      isDirected: true\n    };\n    Object.keys(defaultConf).forEach(function (k) {\n      _this._config[k] = _this._config[k] || defaultConf[k];\n    });\n    this._nodes = {};\n    this._nodeSize = 0;\n    this._edgeSize = 0;\n  }\n\n  // Creates and returns a new graph given the json object\n\n\n  _createClass(Graph, [{\n    key: 'deserialize',\n    value: function deserialize() {\n      var _this2 = this;\n\n      var json = {};\n      json.nodes = [];\n      json.links = [];\n      Object.keys(this._nodes).forEach(function (n) {\n        Object.keys(_this2._nodes[n].out).forEach(function (l) {\n          json.links.push({ \"source\": n, \"target\": l });\n        });\n        json.nodes.push({ \"id\": n });\n      });\n      return json;\n    }\n\n    // Adds a node to the Graph if it is not already in it\n\n  }, {\n    key: 'addNode',\n    value: function addNode(node) {\n      if (!(node in this._nodes)) this._nodeSize++;\n      this._nodes[node] = this.nodeOrEmpty(node);\n    }\n\n    // Removes the node from the graph if it exists\n    // Will also remove all edges connected to the node\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(node) {\n      var _this3 = this;\n\n      if (!(node in this._nodes)) return;\n      Object.keys(this._nodes[node].in).forEach(function (u) {\n        _this3.removeEdge(u, node);\n      });\n      Object.keys(this._nodes[node].out).forEach(function (v) {\n        _this3.removeEdge(node, v);\n      });\n    }\n  }, {\n    key: 'hasNode',\n    value: function hasNode(node) {\n      if (node in this._nodes) return true;\n      return false;\n    }\n\n    // Adds an edge between node u and v\n    // If the graph is directed, then the edge will go from node u to node v\n    // If the graph is undirected, the edge will both go from u and v to v and u\n    // If the graph is weighted, the weight of the edge will be updated if the edge already exists\n    // Throws error if either u or v is not a node\n\n  }, {\n    key: 'addEdge',\n    value: function addEdge(u, v) {\n      var weight = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n      if (!(u in this._nodes && v in this._nodes)) throw new Error(\"Can't add edge when one or more nodes don't exist\");\n      if (!this._config.isWeighted) weight = 1;\n      if (!this.hasEdge(u, v)) this._edgeSize++;\n      if (this.isDirected) {\n        this._nodes[u].out[v] = weight;\n        this._nodes[v].in[u] = weight;\n      } else {\n        this._nodes[u].out[v] = weight;\n        this._nodes[v].in[u] = weight;\n        this._nodes[v].out[u] = weight;\n        this._nodes[u].in[v] = weight;\n      }\n    }\n\n    // Returns whether or not an edge exists between node u and v\n\n  }, {\n    key: 'hasEdge',\n    value: function hasEdge(u, v) {\n      if (!(u in this._nodes && v in this._nodes)) return false;\n      if (v in this._nodes[u].out && u in this._nodes[v].in) return true;\n      return false;\n    }\n\n    // Returns the weight of the edge between node u and v if it exists\n    // and false if it doesn't exist\n\n  }, {\n    key: 'getWeight',\n    value: function getWeight(u, v) {\n      if (this.hasEdge(u, v)) {\n        return this._nodes[u].out[v];\n      }\n      return false;\n    }\n\n    // Removes an edge if it exists\n\n  }, {\n    key: 'removeEdge',\n    value: function removeEdge(u, v) {\n      if (this.hasEdge(u, v)) {\n        if (this.isDirected) {\n          delete this._nodes[u].out[v];\n          delete this._nodes[v].in[u];\n        } else {\n          delete this._nodes[u].out[v];\n          delete this._nodes[v].in[u];\n          delete this._nodes[v].out[u];\n          delete this._nodes[u].in[v];\n        }\n        return true;\n      }\n      return false;\n    }\n\n    // Depth first search\n    // Returns a list of reachable nodes and the discovery node\n\n  }, {\n    key: 'DFS',\n    value: function DFS(u) {\n      var _this4 = this;\n\n      if (!this.hasNode(u)) return {};\n      var discovery = {};\n      var visited = {};\n      var dfs = function dfs(o, v) {\n        if (!_this4.hasNode(v)) return;\n        if (v in visited) return;\n        visited[v] = true;\n        discovery[v] = o;\n        Object.keys(_this4._nodes[v].out).forEach(function (e) {\n          dfs(v, e);\n        });\n      };\n      Object.keys(this._nodes[u].out).forEach(function (e) {\n        dfs(u, e);\n      });\n      return discovery;\n    }\n\n    // returns the node object if it exists or a new one\n\n  }, {\n    key: 'nodeOrEmpty',\n    value: function nodeOrEmpty(node) {\n      return node in this._nodes ? this._nodes[node] : { in: {}, out: {} };\n    }\n\n    // returns a count of nodes in the graph\n\n  }, {\n    key: 'nodeSize',\n    get: function get() {\n      return this._nodeSize;\n    }\n\n    // returns a count of edges\n    // If the graph is undirected each edge will only be counted once\n\n  }, {\n    key: 'edgeSize',\n    get: function get() {\n      return this._edgeSize;\n    }\n\n    // returns an object containing all nodes in the graph\n\n  }, {\n    key: 'nodes',\n    get: function get() {\n      return this._nodes;\n    }\n\n    // returns whether the graph is directed or not\n\n  }, {\n    key: 'isDirected',\n    get: function get() {\n      return this._config.isDirected;\n    }\n\n    // returns whether the edges are weighted or not\n\n  }, {\n    key: 'isWeighted',\n    get: function get() {\n      return this._config.isWeighted;\n    }\n  }], [{\n    key: 'serialize',\n    value: function serialize(json) {\n      var graph = new Graph();\n      json['nodes'].forEach(function (n) {\n        graph.addNode(n.id);\n      });\n      json['links'].forEach(function (l) {\n        graph.addEdge(l.source, l.target);\n      });\n      return graph;\n    }\n  }]);\n\n  return Graph;\n}();\n\nexports.default = Graph;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ3JhcGhhLmpzP2UwOWYiXSwibmFtZXMiOlsiR3JhcGgiLCJjb25maWciLCJfY29uZmlnIiwiZGVmYXVsdENvbmYiLCJpc1dlaWdodGVkIiwiaXNEaXJlY3RlZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiayIsIl9ub2RlcyIsIl9ub2RlU2l6ZSIsIl9lZGdlU2l6ZSIsImpzb24iLCJub2RlcyIsImxpbmtzIiwibiIsIm91dCIsInB1c2giLCJsIiwibm9kZSIsIm5vZGVPckVtcHR5IiwiaW4iLCJyZW1vdmVFZGdlIiwidSIsInYiLCJ3ZWlnaHQiLCJFcnJvciIsImhhc0VkZ2UiLCJoYXNOb2RlIiwiZGlzY292ZXJ5IiwidmlzaXRlZCIsImRmcyIsIm8iLCJlIiwiZ3JhcGgiLCJhZGROb2RlIiwiaWQiLCJhZGRFZGdlIiwic291cmNlIiwidGFyZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCQSxLO0FBQ25CLGlCQUFZQyxNQUFaLEVBQW9CO0FBQUE7O0FBQUE7O0FBQ2xCLFNBQUtDLE9BQUwsR0FBZUQsVUFBVSxFQUF6QjtBQUNBLFFBQUlFLGNBQWM7QUFDaEJDLGtCQUFZLEtBREk7QUFFaEJDLGtCQUFZO0FBRkksS0FBbEI7QUFJQUMsV0FBT0MsSUFBUCxDQUFZSixXQUFaLEVBQXlCSyxPQUF6QixDQUFpQyxhQUFLO0FBQUUsWUFBS04sT0FBTCxDQUFhTyxDQUFiLElBQWtCLE1BQUtQLE9BQUwsQ0FBYU8sQ0FBYixLQUFtQk4sWUFBWU0sQ0FBWixDQUFyQztBQUFxRCxLQUE3RjtBQUNBLFNBQUtDLE1BQUwsR0FBYyxFQUFkO0FBQ0EsU0FBS0MsU0FBTCxHQUFpQixDQUFqQjtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsQ0FBakI7QUFDRDs7QUFFRDs7Ozs7a0NBWWM7QUFBQTs7QUFDWixVQUFJQyxPQUFPLEVBQVg7QUFDQUEsV0FBS0MsS0FBTCxHQUFhLEVBQWI7QUFDQUQsV0FBS0UsS0FBTCxHQUFhLEVBQWI7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WjtBQUNBYSxXQUFLLE9BQUwsRUFBY0wsT0FBZCxDQUFzQixhQUFLO0FBQ3pCMkIsY0FBTUMsT0FBTixDQUFjcEIsRUFBRXFCLEVBQWhCO0FBQ0QsT0FGRDtBQUdBeEIsV0FBSyxPQUFMLEVBQWNMLE9BQWQsQ0FBc0IsYUFBSztBQUN6QjJCLGNBQU1HLE9BQU4sQ0FBY25CLEVBQUVvQixNQUFoQixFQUF3QnBCLEVBQUVxQixNQUExQjtBQUNELE9BRkQ7QUFHQSxhQUFPTCxLQUFQO0FBQ0Q7Ozs7OztrQkF2QmtCbkMsSyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JhcGgge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWcgfHwge307IFxuICAgIGxldCBkZWZhdWx0Q29uZiA9IHtcbiAgICAgIGlzV2VpZ2h0ZWQ6IGZhbHNlLFxuICAgICAgaXNEaXJlY3RlZDogdHJ1ZSBcbiAgICB9O1xuICAgIE9iamVjdC5rZXlzKGRlZmF1bHRDb25mKS5mb3JFYWNoKGsgPT4geyB0aGlzLl9jb25maWdba10gPSB0aGlzLl9jb25maWdba10gfHwgZGVmYXVsdENvbmZba10gfSk7XG4gICAgdGhpcy5fbm9kZXMgPSB7fTtcbiAgICB0aGlzLl9ub2RlU2l6ZSA9IDA7XG4gICAgdGhpcy5fZWRnZVNpemUgPSAwO1xuICB9XG5cbiAgLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBncmFwaCBnaXZlbiB0aGUganNvbiBvYmplY3RcbiAgc3RhdGljIHNlcmlhbGl6ZShqc29uKSB7XG4gICAgbGV0IGdyYXBoID0gbmV3IEdyYXBoKCk7XG4gICAganNvblsnbm9kZXMnXS5mb3JFYWNoKG4gPT4ge1xuICAgICAgZ3JhcGguYWRkTm9kZShuLmlkKTtcbiAgICB9KTtcbiAgICBqc29uWydsaW5rcyddLmZvckVhY2gobCA9PiB7XG4gICAgICBncmFwaC5hZGRFZGdlKGwuc291cmNlLCBsLnRhcmdldCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGdyYXBoO1xuICB9XG5cbiAgZGVzZXJpYWxpemUoKSB7XG4gICAgbGV0IGpzb24gPSB7fTtcbiAgICBqc29uLm5vZGVzID0gW107XG4gICAganNvbi5saW5rcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKHRoaXMuX25vZGVzKS5mb3JFYWNoKG4gPT4ge1xuICAgICAgT2JqZWN0LmtleXModGhpcy5fbm9kZXNbbl0ub3V0KS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICBqc29uLmxpbmtzLnB1c2goe1wic291cmNlXCI6IG4sXCJ0YXJnZXRcIjpsfSk7XG4gICAgICB9KTtcbiAgICAgIGpzb24ubm9kZXMucHVzaCh7XCJpZFwiOiBufSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvLyBBZGRzIGEgbm9kZSB0byB0aGUgR3JhcGggaWYgaXQgaXMgbm90IGFscmVhZHkgaW4gaXRcbiAgYWRkTm9kZShub2RlKSB7XG4gICAgaWYoIShub2RlIGluIHRoaXMuX25vZGVzKSlcbiAgICAgIHRoaXMuX25vZGVTaXplKys7XG4gICAgdGhpcy5fbm9kZXNbbm9kZV0gPSB0aGlzLm5vZGVPckVtcHR5KG5vZGUpO1xuICB9XG5cbiAgLy8gUmVtb3ZlcyB0aGUgbm9kZSBmcm9tIHRoZSBncmFwaCBpZiBpdCBleGlzdHNcbiAgLy8gV2lsbCBhbHNvIHJlbW92ZSBhbGwgZWRnZXMgY29ubmVjdGVkIHRvIHRoZSBub2RlXG4gIHJlbW92ZU5vZGUobm9kZSkge1xuICAgIGlmKCEobm9kZSBpbiB0aGlzLl9ub2RlcykpIFxuICAgICAgcmV0dXJuO1xuICAgIE9iamVjdC5rZXlzKHRoaXMuX25vZGVzW25vZGVdLmluKVxuICAgICAgLmZvckVhY2godSA9PiB7XG4gICAgICAgIHRoaXMucmVtb3ZlRWRnZSh1LCBub2RlKTtcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyh0aGlzLl9ub2Rlc1tub2RlXS5vdXQpXG4gICAgICAuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVFZGdlKG5vZGUsIHYpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFzTm9kZShub2RlKSB7XG4gICAgaWYobm9kZSBpbiB0aGlzLl9ub2RlcylcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIEFkZHMgYW4gZWRnZSBiZXR3ZWVuIG5vZGUgdSBhbmQgdlxuICAvLyBJZiB0aGUgZ3JhcGggaXMgZGlyZWN0ZWQsIHRoZW4gdGhlIGVkZ2Ugd2lsbCBnbyBmcm9tIG5vZGUgdSB0byBub2RlIHZcbiAgLy8gSWYgdGhlIGdyYXBoIGlzIHVuZGlyZWN0ZWQsIHRoZSBlZGdlIHdpbGwgYm90aCBnbyBmcm9tIHUgYW5kIHYgdG8gdiBhbmQgdVxuICAvLyBJZiB0aGUgZ3JhcGggaXMgd2VpZ2h0ZWQsIHRoZSB3ZWlnaHQgb2YgdGhlIGVkZ2Ugd2lsbCBiZSB1cGRhdGVkIGlmIHRoZSBlZGdlIGFscmVhZHkgZXhpc3RzXG4gIC8vIFRocm93cyBlcnJvciBpZiBlaXRoZXIgdSBvciB2IGlzIG5vdCBhIG5vZGVcbiAgYWRkRWRnZSh1LCB2LCB3ZWlnaHQgPSAxKSB7XG4gICAgaWYoISh1IGluIHRoaXMuX25vZGVzICYmIHYgaW4gdGhpcy5fbm9kZXMpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYWRkIGVkZ2Ugd2hlbiBvbmUgb3IgbW9yZSBub2RlcyBkb24ndCBleGlzdFwiKTtcbiAgICBpZighdGhpcy5fY29uZmlnLmlzV2VpZ2h0ZWQpXG4gICAgICB3ZWlnaHQgPSAxO1xuICAgIGlmKCF0aGlzLmhhc0VkZ2UodSx2KSlcbiAgICAgIHRoaXMuX2VkZ2VTaXplKys7XG4gICAgaWYodGhpcy5pc0RpcmVjdGVkKSB7XG4gICAgICB0aGlzLl9ub2Rlc1t1XS5vdXRbdl0gPSB3ZWlnaHQ7XG4gICAgICB0aGlzLl9ub2Rlc1t2XS5pblt1XSA9IHdlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbm9kZXNbdV0ub3V0W3ZdID0gd2VpZ2h0O1xuICAgICAgdGhpcy5fbm9kZXNbdl0uaW5bdV0gPSB3ZWlnaHQ7XG4gICAgICB0aGlzLl9ub2Rlc1t2XS5vdXRbdV0gPSB3ZWlnaHQ7XG4gICAgICB0aGlzLl9ub2Rlc1t1XS5pblt2XSA9IHdlaWdodDtcbiAgICB9XG4gIH1cblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIGVkZ2UgZXhpc3RzIGJldHdlZW4gbm9kZSB1IGFuZCB2XG4gIGhhc0VkZ2UodSwgdikge1xuICAgIGlmKCEodSBpbiB0aGlzLl9ub2RlcyAmJiB2IGluIHRoaXMuX25vZGVzKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZih2IGluIHRoaXMuX25vZGVzW3VdLm91dCAmJiB1IGluIHRoaXMuX25vZGVzW3ZdLmluKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgd2VpZ2h0IG9mIHRoZSBlZGdlIGJldHdlZW4gbm9kZSB1IGFuZCB2IGlmIGl0IGV4aXN0c1xuICAvLyBhbmQgZmFsc2UgaWYgaXQgZG9lc24ndCBleGlzdFxuICBnZXRXZWlnaHQodSwgdikge1xuICAgIGlmKHRoaXMuaGFzRWRnZSh1LCB2KSkge1xuICAgICAgcmV0dXJuIHRoaXMuX25vZGVzW3VdLm91dFt2XTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmVtb3ZlcyBhbiBlZGdlIGlmIGl0IGV4aXN0c1xuICByZW1vdmVFZGdlKHUsIHYpIHtcbiAgICBpZih0aGlzLmhhc0VkZ2UodSwgdikpIHtcbiAgICAgIGlmKHRoaXMuaXNEaXJlY3RlZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5fbm9kZXNbdV0ub3V0W3ZdO1xuICAgICAgICBkZWxldGUgdGhpcy5fbm9kZXNbdl0uaW5bdV07XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX25vZGVzW3VdLm91dFt2XTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX25vZGVzW3ZdLmluW3VdO1xuICAgICAgICBkZWxldGUgdGhpcy5fbm9kZXNbdl0ub3V0W3VdO1xuICAgICAgICBkZWxldGUgdGhpcy5fbm9kZXNbdV0uaW5bdl07XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gRGVwdGggZmlyc3Qgc2VhcmNoXG4gIC8vIFJldHVybnMgYSBsaXN0IG9mIHJlYWNoYWJsZSBub2RlcyBhbmQgdGhlIGRpc2NvdmVyeSBub2RlXG4gIERGUyh1KSB7XG4gICAgaWYoIXRoaXMuaGFzTm9kZSh1KSkgXG4gICAgICByZXR1cm4ge307XG4gICAgbGV0IGRpc2NvdmVyeSA9IHt9O1xuICAgIGxldCB2aXNpdGVkID0ge307XG4gICAgbGV0IGRmcyA9IChvLCB2KSA9PiB7XG4gICAgICBpZighKHRoaXMuaGFzTm9kZSh2KSkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmKHYgaW4gdmlzaXRlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdmlzaXRlZFt2XSA9IHRydWU7XG4gICAgICBkaXNjb3Zlcnlbdl0gPSBvO1xuICAgICAgT2JqZWN0LmtleXModGhpcy5fbm9kZXNbdl0ub3V0KS5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgIGRmcyh2LCBlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgT2JqZWN0LmtleXModGhpcy5fbm9kZXNbdV0ub3V0KS5mb3JFYWNoKGUgPT4ge1xuICAgICAgZGZzKHUsIGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBkaXNjb3Zlcnk7XG4gIH1cblxuICAvLyByZXR1cm5zIHRoZSBub2RlIG9iamVjdCBpZiBpdCBleGlzdHMgb3IgYSBuZXcgb25lXG4gIG5vZGVPckVtcHR5KG5vZGUpIHtcbiAgICByZXR1cm4gKG5vZGUgaW4gdGhpcy5fbm9kZXMpID8gdGhpcy5fbm9kZXNbbm9kZV0gOiB7aW46IHt9LCBvdXQ6IHt9fTtcbiAgfVxuXG4gIC8vIHJldHVybnMgYSBjb3VudCBvZiBub2RlcyBpbiB0aGUgZ3JhcGhcbiAgZ2V0IG5vZGVTaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9ub2RlU2l6ZTtcbiAgfVxuXG4gIC8vIHJldHVybnMgYSBjb3VudCBvZiBlZGdlc1xuICAvLyBJZiB0aGUgZ3JhcGggaXMgdW5kaXJlY3RlZCBlYWNoIGVkZ2Ugd2lsbCBvbmx5IGJlIGNvdW50ZWQgb25jZVxuICBnZXQgZWRnZVNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VkZ2VTaXplO1xuICB9XG5cbiAgLy8gcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgbm9kZXMgaW4gdGhlIGdyYXBoXG4gIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9kZXM7XG4gIH1cblxuICAvLyByZXR1cm5zIHdoZXRoZXIgdGhlIGdyYXBoIGlzIGRpcmVjdGVkIG9yIG5vdFxuICBnZXQgaXNEaXJlY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnLmlzRGlyZWN0ZWQ7XG4gIH1cblxuICAvLyByZXR1cm5zIHdoZXRoZXIgdGhlIGVkZ2VzIGFyZSB3ZWlnaHRlZCBvciBub3RcbiAgZ2V0IGlzV2VpZ2h0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5pc1dlaWdodGVkO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZ3JhcGhhLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}])});